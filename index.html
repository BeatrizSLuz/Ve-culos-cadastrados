<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ve√≠culos Cadastrados</title>
  <link rel="stylesheet" href="veiculos-cadastrados.css">
</head>
<body>
  
    <!-- Bot√£o menu -->
  <div class="menu-btn" id="menu-btn">‚ò∞</div>

  <!-- Sidebar -->
  <div class="sidebar" id="sidebar">
    <ul>
      <li><a href="https://beatrizsluz.github.io/tela-inicial/">Tela Inicial</a></li>
      <li><a href="https://beatrizsluz.github.io/cadastrar-veiculos/">Cadastrar Novo Ve√≠culo</a></li>
      <li><a href="#">Ve√≠culos Cadastrados</a></li>
      <li><a href="#">Meus Dados</a></li>
      <li class="logout"><a href="https://beatrizsluz.github.io/tela-de-login-BMS/">‚éã Sair</a></li>
    </ul>
  </div>
  <div class="overlay" id="overlay"></div>
  


  

  <main class="content">
    <div class="title">Acessar ve√≠culos cadastrados</div>

    <div class="search-box">
      <input id="searchInput" type="text" placeholder="Buscar ve√≠culo..." />
      <button id="searchBtn" class="search-btn">üîç</button>
    </div>

    <div id="vehicleList" class="vehicle-list">
      <div class="vehicle-item">
        <img src="siena1.jpg" alt="Siena Vermelho">
        <div class="vehicle-info">
          <a href="https://beatrizsluz.github.io/Siena-vermelho-Marcos/" class="vehicle-name">SIENA VERMELHO - MARCOS</a>
          <p class="vehicle-plate">Placa: OLX123</p>
        </div>
      </div>

      <div class="vehicle-item">
        <img src="siena2.jpg" alt="Siena Vermelho">
        <div class="vehicle-info">
          <a href="#" class="vehicle-name">SIENA VERMELHO - PAULO</a>
          <p class="vehicle-plate">Placa: BBC764</p>
        </div>
      </div>
    </div>
  </main>
  <script>
    const menuBtn = document.getElementById("menu-btn");
    const sidebar = document.getElementById("sidebar");
    const overlay = document.getElementById("overlay");

    menuBtn.addEventListener("click", () => {
      sidebar.classList.toggle("active");
      overlay.classList.toggle("active");
    });

    overlay.addEventListener("click", () => {
      sidebar.classList.remove("active");
      overlay.classList.remove("active");
    });

    

  
  
  function carregarVeiculos(filtro = "") {
    const listaHTML = document.getElementById("vehicleList");
    listaHTML.innerHTML = "";

    const veiculos = JSON.parse(localStorage.getItem("veiculos")) || [];

    const filtrados = veiculos.filter(v =>
      (v.proprietario?.toLowerCase() || "").includes(filtro.toLowerCase()) ||
      (v.placa_modelo?.toLowerCase() || "").includes(filtro.toLowerCase()) ||
      (v.funcionario?.toLowerCase() || "").includes(filtro.toLowerCase()) ||
      (v.servico?.toLowerCase() || "").includes(filtro.toLowerCase()) ||
      (v.placa_modelo?.split(" ")[0] || "").toLowerCase().includes(filtro.toLowerCase())
    );

    // Se n√£o encontrar
    if (filtrados.length === 0) {
      listaHTML.innerHTML = "<p style='color:#bbb;'>Nenhum ve√≠culo encontrado.</p>";
      return;
    }

   //criar itens
    filtrados.forEach(v => {
      const item = document.createElement("div");
      item.className = "vehicle-item";

      // Foto 
      const imagem = v.foto_chegada || "imagem_padrao.jpg";

      item.innerHTML = `
        <img src="${imagem}" alt="Ve√≠culo">
        <div class="vehicle-info">
          <a class="vehicle-name">${v.proprietario?.toUpperCase() || "SEM NOME"}</a>
          <p class="vehicle-plate">Placa/Modelo: ${v.placa_modelo}</p>
          <p style="color:#aaa; font-size:0.8rem;">Servi√ßo: ${v.servico}</p>
        </div>
      `;

      item.onclick = () => {
        window.location.href = `cadastrarveiculo.html?id=${v.id}&view=1`;
      };


      listaHTML.appendChild(item);
    });
  }

  // busca
  document.getElementById("searchBtn").addEventListener("click", () => {
    const texto = document.getElementById("searchInput").value;
    carregarVeiculos(texto);
  });

  document.getElementById("searchInput").addEventListener("keyup", (e) => {
    carregarVeiculos(e.target.value);
  });

  
  carregarVeiculos();
  
  


  </script>
</body>
</html>


